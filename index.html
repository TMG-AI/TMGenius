<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TMGenius - Multi-AI Response Engine</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
      color: #333;
      background: #ffffff;
    }

    /* Hero Section */
    .hero {
      background: linear-gradient(135deg, #1a365d 0%, #2d5a87 50%, #4a90a4 100%);
      color: white;
      padding: 50px 0 30px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .hero::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="2" fill="rgba(255,255,255,0.1)"/></svg>') repeat;
      opacity: 0.3;
    }

    .hero-content {
      max-width: 800px;
      margin: 0 auto;
      padding: 0 2rem;
      position: relative;
      z-index: 1;
    }

    .hero h1 {
      font-size: 3rem;
      margin-bottom: 0.5rem;
      font-weight: 300;
      line-height: 1.2;
    }

    .hero .subtitle {
      font-size: 1.2rem;
      margin-bottom: 0;
      opacity: 0.9;
      font-weight: 300;
    }

    /* Main Section */
    .upload-section {
      padding: 20px 0;
      background: #f8fafc;
    }

    .container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 0 2rem;
    }

    .section-header {
      text-align: center;
      margin-bottom: 1.5rem;
    }

    .section-header h2 {
      font-size: 2.2rem;
      color: #1a365d;
      margin-bottom: 0.5rem;
      font-weight: 300;
    }

    .section-header p {
      font-size: 1.1rem;
      color: #4a5568;
      max-width: 600px;
      margin: 0 auto;
    }

    .how-link {
      color: #2d5a87;
      font-weight: 500;
      text-decoration: underline;
      cursor: pointer;
    }

    .upload-form {
      background: white;
      border-radius: 15px;
      padding: 1.5rem;
      box-shadow: 0 15px 30px rgba(0,0,0,0.08);
      border: 1px solid #e2e8f0;
    }

    .form-group {
      margin-bottom: 1rem;
    }

    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 600;
      color: #1a365d;
      font-size: 1.1rem;
    }

    .form-group .description {
      font-size: 0.9rem;
      color: #64748b;
      margin-bottom: 0.75rem;
    }

    .prompt-textarea {
      width: 100%;
      min-height: 200px;
      padding: 1rem;
      border: 2px solid #cbd5e0;
      border-radius: 10px;
      font-size: 1rem;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
      resize: vertical;
      outline: none;
      transition: all 0.3s ease;
      background: #f8fafc;
    }

    .prompt-textarea:focus {
      border-color: #4a90a4;
      background: white;
    }

    .prompt-textarea::placeholder {
      color: #9ca3af;
    }

    /* File Upload Styles */
    .file-upload-area {
      border: 2px dashed #cbd5e0;
      border-radius: 10px;
      padding: 2rem;
      text-align: center;
      transition: all 0.3s ease;
      background: #f8fafc;
      cursor: pointer;
      position: relative;
    }

    .file-upload-area:hover, .file-upload-area.drag-over {
      border-color: #4a90a4;
      background: #f0f9ff;
    }

    .file-upload-area input[type="file"] {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0;
      cursor: pointer;
    }

    .upload-icon {
      font-size: 3rem;
      color: #9ca3af;
      margin-bottom: 1rem;
    }

    .upload-text {
      color: #4a5568;
      font-size: 1.1rem;
      margin-bottom: 0.5rem;
    }

    .upload-subtext {
      color: #9ca3af;
      font-size: 0.9rem;
    }

    .file-list {
      margin-top: 1rem;
    }

    .file-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.75rem;
      background: #f8fafc;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      margin-bottom: 0.5rem;
    }

    .file-info {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .file-icon {
      color: #4a90a4;
    }

    .file-name {
      font-weight: 500;
      color: #1a365d;
    }

    .file-size {
      color: #9ca3af;
      font-size: 0.8rem;
    }

    .remove-file {
      background: none;
      border: none;
      color: #ef4444;
      cursor: pointer;
      padding: 0.25rem;
      border-radius: 4px;
      transition: background-color 0.2s;
    }

    .remove-file:hover {
      background: #fee2e2;
    }

    .form-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 15px;
    }

    .character-count {
      font-size: 0.75rem;
      color: #64748b;
    }

    .submit-btn {
      background: linear-gradient(135deg, #2d5a87, #4a90a4);
      color: white;
      border: none;
      padding: 1rem 3rem;
      font-size: 1.1rem;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.3s ease;
      min-width: 200px;
      font-weight: 600;
    }

    .submit-btn:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(45, 90, 135, 0.3);
    }

    .submit-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    .loading-spinner {
      display: none;
      width: 16px;
      height: 16px;
      border: 2px solid transparent;
      border-top: 2px solid currentColor;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-right: 8px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Dashboard Styles */
    .dashboard {
      display: none;
      padding: 30px 20px;
      background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
      border: 1px solid #e9ecef;
      border-radius: 12px;
      margin-top: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    }

    .dashboard h2 {
      font-size: 2.2rem;
      color: #1a365d;
      margin-bottom: 0.5rem;
      font-weight: 300;
      text-align: center;
      position: relative;
    }

    .dashboard h2:after {
      content: '';
      position: absolute;
      bottom: -8px;
      left: 50%;
      transform: translateX(-50%);
      width: 60px;
      height: 3px;
      background: linear-gradient(90deg, #2d5a87, #4a90a4);
      border-radius: 2px;
    }

    .synthesized-response {
      background: white;
      border-radius: 10px;
      padding: 25px;
      margin-bottom: 30px;
      border: 1px solid #e9ecef;
      box-shadow: 0 2px 8px rgba(0,0,0,0.04);
    }

    .synthesized-response h3 {
      color: #1a365d;
      margin-bottom: 18px;
      font-size: 1.3em;
      font-weight: 600;
    }

    .response-content {
      color: #4a5568;
      line-height: 1.7;
      white-space: pre-wrap;
    }

    .quick-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      justify-content: center;
      margin-top: 30px;
    }

    .action-btn {
      background: linear-gradient(135deg, #2d5a87, #4a90a4);
      color: white;
      padding: 1rem 3rem;
      font-size: 1.1rem;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.3s ease;
      border: none;
      min-width: 200px;
      font-weight: 600;
      text-decoration: none;
      display: inline-block;
      box-shadow: 0 10px 25px rgba(45, 90, 135, 0.3);
    }

    .action-btn:hover {
      background: linear-gradient(135deg, #34495e, #2c3e50);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(44, 62, 80, 0.3);
    }

    .action-btn.secondary {
      background: linear-gradient(135deg, #95a5a6, #7f8c8d);
      box-shadow: 0 3px 10px rgba(149, 165, 166, 0.2);
    }

    .action-btn.secondary:hover {
      background: linear-gradient(135deg, #7f8c8d, #95a5a6);
      box-shadow: 0 5px 15px rgba(149, 165, 166, 0.3);
    }

    .processing-status {
      background: #fef3c7;
      border: 1px solid #f59e0b;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 25px;
      font-size: 14px;
      color: #92400e;
      text-align: center;
    }

    /* Features Section */
    .features {
      padding: 40px 0;
      background: white;
    }

    .features-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
      margin-top: 1.5rem;
    }

    .feature-card {
      text-align: center;
      padding: 1.5rem;
      border-radius: 12px;
      background: #f8fafc;
      border: 1px solid #e2e8f0;
      transition: transform 0.3s ease;
    }

    .feature-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    }

    .feature-icon {
      font-size: 2.5rem;
      color: #4a90a4;
      margin-bottom: 0.75rem;
    }

    .feature-card h3 {
      font-size: 1.2rem;
      color: #1a365d;
      margin-bottom: 0.75rem;
    }

    .feature-card p {
      color: #4a5568;
      line-height: 1.6;
    }

    /* Footer */
    .footer {
      background: linear-gradient(135deg, #1a365d 0%, #2d5a87 100%);
      padding: 20px 0;
      margin-top: 40px;
    }

    .footer p {
      text-align: center;
      color: white;
      font-size: 0.95rem;
      margin: 0;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .hero h1 {
        font-size: 2.5rem;
      }
      
      .hero .subtitle {
        font-size: 1.1rem;
      }
      
      .upload-form {
        padding: 2rem;
      }
      
      .section-header h2 {
        font-size: 2rem;
      }
      
      .container {
        padding: 0 1rem;
      }
      
      .features-grid {
        grid-template-columns: 1fr;
      }
      
      .quick-actions {
        flex-direction: column;
      }

      .form-footer {
        flex-direction: column;
        gap: 15px;
        align-items: stretch;
      }

      .file-upload-area {
        padding: 1.5rem;
      }
    }
  </style>
</head>
<body>
  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-content">
      <h1>TMGenius</h1>
      <p class="subtitle">Multi-AI Response Engine</p>
    </div>
  </section>

  <!-- Upload Section -->
  <section class="upload-section">
    <div class="container">
      <div class="section-header">
        <h2>Submit & Analyze</h2>
        <p>
        TMGenius will optimize your prompt and deliver synthesized results from OpenAI, Claude, and Gemini.
          See how TMGenius <a href="#features" class="how-link">works</a>.
        </p>
      </div>

      <form class="upload-form" id="promptForm">
        <div class="form-group">
          <label for="promptText">Your Prompt</label>
          <p class="description">Be as detailed as possible for the best results.</p>
          <textarea 
            id="promptText" 
            name="prompt" 
            class="prompt-textarea" 
          required
          ></textarea>
        </div>

        <!-- File Upload Section -->
        <div class="form-group">
          <label for="documentUpload">Upload Documents (Optional)</label>
          <p class="description">Upload relevant documents to enhance the analysis context. Supports PDF, DOC, DOCX, TXT, MD, and JSON files.</p>
          <div class="file-upload-area" id="fileUploadArea">
            <input type="file" id="documentUpload" name="documents" multiple accept=".pdf,.doc,.docx,.txt,.md,.json">
            <div class="upload-icon">ðŸ“„</div>
            <div class="upload-text">Click to upload or drag and drop</div>
            <div class="upload-subtext">PDF, DOC, DOCX, TXT, MD, JSON up to 10MB each</div>
          </div>
          <div class="file-list" id="fileList"></div>
        </div>

        <div class="form-footer">
          <div class="character-count">
            <span id="charCount">0</span> characters
          </div>
          <button type="submit" class="submit-btn" id="submitBtn">
            <span class="loading-spinner" id="loadingSpinner"></span>
            <span id="buttonText">âœ… Submit Request</span>
          </button>
        </div>
      </form>

      <!-- Dashboard Results -->
      <div class="dashboard" id="dashboard">
        <h2>TMGenius Analysis Complete</h2>
        <div class="processing-status" id="processingStatus" style="display: none;">
          Processing your optimized request through multiple AI models...
        </div>

        <div class="synthesized-response">
          <h3>ðŸŽ¯ Synthesized Best Response</h3>
          <div class="response-content" id="summaryResult">
            <!-- Results will appear here -->
          </div>
        </div>

        <div class="quick-actions">
          <button class="action-btn" onclick="downloadPDF()">Download PDF Report</button>
          <button class="action-btn secondary" onclick="resetForm()">Submit New Request</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Features Section -->
  <section class="features" id="features">
    <div class="container">
      <div class="section-header">
        <h2>How TMGenius Works</h2>
      </div>
      <div class="features-grid">
        <div class="feature-card">
          <div class="feature-icon">ðŸ§ </div>
          <h3>Request Analysis</h3>
          <p>AI analyzes and optimizes your request for maximum effectiveness across all AI models</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">âš¡</div>
          <h3>Prompt Optimization</h3>
          <p>Your request is enhanced for clarity, specificity, and cross-platform compatibility</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">ðŸ¤–</div>
          <h3>Multi-Model Processing</h3>
          <p>Optimized prompt runs through OpenAI, Claude, and Gemini simultaneously</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">ðŸ“„</div>
          <h3>Synthesis & Report</h3>
          <p>AI synthesizes all responses into a comprehensive analysis with downloadable PDF report</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div>
      <p>&copy; 2025 <strong>The Messina Group</strong>. All rights reserved.</p>
    </div>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      try {
        const promptTextarea = document.getElementById('promptText');
        const charCount = document.getElementById('charCount');
        const form = document.getElementById('promptForm');
        const submitBtn = document.getElementById('submitBtn');
        const loadingSpinner = document.getElementById('loadingSpinner');
        const buttonText = document.getElementById('buttonText');
        const dashboard = document.getElementById('dashboard');
        const processingStatus = document.getElementById('processingStatus');
        const fileUploadArea = document.getElementById('fileUploadArea');
        const documentUpload = document.getElementById('documentUpload');
        const fileList = document.getElementById('fileList');

        let isProcessing = false;
        let currentReportData = null;
        let uploadedFiles = [];

        // Character counter
        if (promptTextarea && charCount) {
          promptTextarea.addEventListener('input', function() {
            charCount.textContent = this.value.length;
          });
        }

        // File upload handling
        if (documentUpload && fileUploadArea && fileList) {
          documentUpload.addEventListener('change', handleFileSelect);
          
          // Drag and drop
          fileUploadArea.addEventListener('dragover', function(e) {
            e.preventDefault();
            this.classList.add('drag-over');
          });
          
          fileUploadArea.addEventListener('dragleave', function(e) {
            e.preventDefault();
            this.classList.remove('drag-over');
          });
          
          fileUploadArea.addEventListener('drop', function(e) {
            e.preventDefault();
            this.classList.remove('drag-over');
            const files = e.dataTransfer.files;
            handleFiles(files);
          });
        }

        function handleFileSelect(e) {
          handleFiles(e.target.files);
        }

        function handleFiles(files) {
          for (let i = 0; i < files.length; i++) {
            const file = files[i];
            
            // Validate file size (10MB max)
            if (file.size > 10 * 1024 * 1024) {
              alert(`File "${file.name}" is too large. Maximum size is 10MB.`);
              continue;
            }
            
            // Check if file already exists
            const existingFile = uploadedFiles.find(f => f.name === file.name && f.size === file.size);
            if (existingFile) {
              continue;
            }
            
            uploadedFiles.push(file);
            displayFile(file);
          }
        }

        function displayFile(file) {
          const fileItem = document.createElement('div');
          fileItem.className = 'file-item';
          fileItem.innerHTML = `
            <div class="file-info">
              <span class="file-icon">ðŸ“„</span>
              <span class="file-name">${file.name}</span>
              <span class="file-size">(${formatFileSize(file.size)})</span>
            </div>
            <button type="button" class="remove-file" onclick="removeFile('${file.name}', this)">âœ•</button>
          `;
          fileList.appendChild(fileItem);
        }

        function formatFileSize(bytes) {
          if (bytes === 0) return '0 Bytes';
          const k = 1024;
          const sizes = ['Bytes', 'KB', 'MB', 'GB'];
          const i = Math.floor(Math.log(bytes) / Math.log(k));
          return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        window.removeFile = function(fileName, buttonElement) {
          uploadedFiles = uploadedFiles.filter(file => file.name !== fileName);
          const fileItem = buttonElement.closest('.file-item');
          if (fileItem && fileItem.parentNode) {
            fileItem.parentNode.removeChild(fileItem);
          }
        };

        // Form submission
        if (form) {
          form.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            if (!promptTextarea || isProcessing) return;
            
            const prompt = promptTextarea.value.trim();
            if (!prompt) {
              alert('Please enter a request before submitting.');
              return;
            }

            isProcessing = true;
            if (submitBtn) submitBtn.disabled = true;
            if (loadingSpinner) loadingSpinner.style.display = 'inline-block';
            if (buttonText) buttonText.textContent = 'Analyzing...';
            
            try {
              // Show processing status
              if (processingStatus) processingStatus.style.display = 'block';
              if (dashboard) {
                dashboard.style.display = 'block';
                dashboard.scrollIntoView({ behavior: 'smooth' });
              }

              // Create FormData for file uploads
              const formData = new FormData();
              formData.append('prompt', prompt);
              
              // Add uploaded files
              uploadedFiles.forEach((file) => {
                formData.append('documents', file);
              });

              const response = await fetch('https://swheatman.app.n8n.cloud/webhook/8c7f9c77-c7a2-4316-ba2a-3b9ffefd4bf7', {
                method: 'POST',
                body: formData
              });

              if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
              }

              const result = await response.json();
              console.log('Response from TMGenius:', result);
              
              // Hide processing and show results
              setTimeout(() => {
                if (processingStatus) processingStatus.style.display = 'none';
                
                if (result && result.summary) {
                  currentReportData = result;
                  const summaryElement = document.getElementById('summaryResult');
                  if (summaryElement) {
                    summaryElement.textContent = result.summary;
                  }
                } else {
                  alert('Processing completed but results format was unexpected. Please try again.');
                }
                
                resetProcessingState();
              }, 2000);
              
            } catch (error) {
              console.error('Error:', error);
              alert('Sorry, there was an error processing your request. Please try again.');
              resetProcessingState();
            }
          });
        }

        function resetProcessingState() {
          isProcessing = false;
          if (submitBtn) submitBtn.disabled = false;
          if (loadingSpinner) loadingSpinner.style.display = 'none';
          if (buttonText) buttonText.textContent = 'âœ… Submit Request';
        }

        // Global functions for onclick handlers
        window.resetForm = function() {
          if (form) form.reset();
          if (charCount) charCount.textContent = '0';
          if (dashboard) dashboard.style.display = 'none';
          currentReportData = null;
          
          // Clear uploaded files
          uploadedFiles = [];
          if (fileList) fileList.innerHTML = '';
          
          const uploadForm = document.querySelector('.upload-form');
          if (uploadForm) uploadForm.scrollIntoView({ behavior: 'smooth' });
        };

        window.downloadPDF = function() {
          if (!currentReportData || !currentReportData.summary) {
            alert('No report data available for download.');
            return;
          }

          try {
            if (typeof window.jsPDF === 'undefined') {
              alert('PDF library not loaded. Please refresh the page and try again.');
              return;
            }

            const { jsPDF } = window.jsPDF;
            const doc = new jsPDF();
            
            // Add title
            doc.setFontSize(20);
            doc.text('TMGenius Multi-AI Analysis Report', 20, 30);
            
            // Add date
            doc.setFontSize(12);
            doc.text(`Generated: ${new Date().toLocaleDateString()}`, 20, 45);
            
            // Add content
            doc.setFontSize(11);
            const splitText = doc.splitTextToSize(currentReportData.summary, 170);
            doc.text(splitText, 20, 65);
            
            // Save
            doc.save(`TMGenius_Report_${new Date().toISOString().split('T')[0]}.pdf`);
            
          } catch (error) {
            console.error('Error generating PDF:', error);
            alert('Error generating PDF. Please try again.');
          }
        };

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
          anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
              target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
          });
        });

      } catch (error) {
        console.error('Script initialization error:', error);
      }
    });
  </script>
</body>
</html>
